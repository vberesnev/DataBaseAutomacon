Добрый день.
Это пояснительная записка для тестового задания.

Само задание:
Компания занимается розничней торговлей продуктами питания. Компания быстрорастущая в настоящий момент более 1000 магазинов. 
Главной особенностью является ежедневное распределение товаров с нескольких распределительных центров на торговые точки.
Распределение товаров выполняется исходя из показателей, кратно количеству товара в коробке: 
1) План продаж на день недели(рассчитывается еженедельно на несколько дней вперед исходя из статистики продаж)
2) Остаток товара на магазине
по формуле КоличествоКоробокТОвара на магазин = ОкруглиДоКоробкиВверх(ПланПродаж - Остаток товара на магазине)
 
Необходимо реализовать основные таблицы и процедуру распределения товара на день недели.

Решение:
4 таблицы: 
справочник товаров Products
справочник магазинов Shops
таблица остатков ShopBalance
товара в магазине и таблица недельного плана продаж оп дням недели WeekSalesPlan

2 представления для удобного просмотра:
Баланса товаров View_ShopBalance
Плана продаж View_WeekSalesPlan

2 скалярные функции:
BoxOfProductToShop - возврщает количество коробок, которое надо отгрузуть. Вход. параметры: ID продукта, план продаж, текущий баланс.
Внутри происходит округление в большую сторону. Если результат меньше нуля (если вдруг план продаж<текущего остатка), то возвращется 0
ProductPlanInShopByDay - возвращает план продажи (число в штуках, не в коробках) в зависимости от дня недели. Вход. параметры: ID продукта, ID магазина, день недели (где 1 - понедельник, 7 - воскресенье).

1 основная хранимая процедура:
sp_ProductDestributionToShopsByDay - возвращает таблицу вида Магазин|Товар|Баланс_ШТУК|Коробок_на_отгрузку
Внутри используются скалярные функции.

Береснев Валерий.
e-mail vberesnev.job@gmail.com
Телеграмм: https://t.me/kaktus11
Спасибо.




